function log(s){if("object"==typeof s)for(var i in s)s.hasOwnProperty(i)&&plugins.util.log(plugins.util.colors.blue(s[i]));else plugins.util.log(plugins.util.colors.blue(s))}var gulp=require("gulp"),del=require("del"),plugins=require("gulp-load-plugins")({lazy:!0}),allJsFilesMainPage=["*.js","js/*.js"],allJsFilesViews=["views/js/*.js"],allCssFilesMainPage=["css/*.css"],allCssFilesViews=["views/css/*.css"],allImagesMainPage=["img/*.*"],allImagesViews=["views/images/*.*"],allJsFiles=allJsFilesMainPage.concat(allJsFilesViews),allCssFiles=allCssFilesMainPage.concat(allCssFilesMainPage);gulp.task("js-main",function(){return log("Uglifying JS files in main folder..."),gulp.src(allJsFilesMainPage).pipe(plugins.uglify()).pipe(plugins.rename({suffix:".min"})).pipe(gulp.dest("js/dist"))}),gulp.task("js-views",function(){return log("Uglifying and concatenating JS files in views folder..."),gulp.src(allJsFilesViews).pipe(plugins.uglify()).pipe(plugins.rename({suffix:".min"})).pipe(gulp.dest("views/js/dist"))}),gulp.task("styles-main",function(){return log("Minifying CSS in main folder..."),gulp.src(allCssFilesMainPage).pipe(plugins.autoprefixer({browsers:["last 2 version","> 5%"]})).pipe(plugins.csso()).pipe(plugins.rename({suffix:".min"})).pipe(gulp.dest("css/dist"))}),gulp.task("styles-views",function(){return log("Minifying CSS in views folder..."),gulp.src(allCssFilesViews).pipe(plugins.autoprefixer({browsers:["last 2 version","> 5%"]})).pipe(plugins.csso()).pipe(plugins.rename({suffix:".min"})).pipe(gulp.dest("views/css/dist"))}),gulp.task("images-main",function(){return log("Compressing images in main folder..."),gulp.src(allImagesMainPage).pipe(plugins.imagemin({optimizationLevel:4})).pipe(gulp.dest("img/dist"))}),gulp.task("images-views",function(){return log("Compressing images in views folder..."),gulp.src(allImagesViews).pipe(plugins.imagemin({optimizationLevel:4})).pipe(gulp.dest("views/images/dist"))}),gulp.task("serve",["js-main","js-views","styles-main","styles-views","images-main","images-views"],function(){var s={script:"server.js",delayTime:1,env:{PORT:3e3},watch:allJsFiles};return plugins.nodemon(s).on("restart",function(s){log("Restarting...")})}),gulp.task("default",["serve"]);